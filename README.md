# 🐍 Conda Environment Manager

Conda環境を閲覧、管理、分析するためのモダンなWebアプリケーションです。FastAPI（バックエンド）とReact/Vite（フロントエンド）で構築されています。

## ✨ 機能

### 環境管理
- **環境の閲覧**: ローカルのConda環境一覧を、Pythonバージョン、ディスク使用量、最終更新日とともに表示
- **グリッド/テーブル表示**: 環境リストをカード形式またはテーブル形式で切り替え可能
- **ソート機能**: 名前、Pythonバージョン、サイズ、更新日時で昇順/降順ソート
- **作成と複製**: 新しい環境の作成や、既存環境の複製が簡単に可能
- **インポート**: `environment.yml` または `requirements.txt` から環境を作成
- **エクスポート**: 環境設定をYAMLファイルとしてエクスポート
- **削除**: 不要な環境を削除（確認ダイアログ付き）

### パッケージ管理
- **パッケージ一覧**: 各環境のインストール済みパッケージを表示
- **個別インストール**: パッケージ名を指定してインストール
- **ファイルからインストール**: `requirements.txt` または `environment.yml` から既存環境にパッケージを追加
- **アンインストール**: 不要なパッケージを削除（確認ダイアログ付き）
- **自動更新**: パッケージ操作後、リストが自動的に更新

### UX機能
- **ローディング表示**: 処理中は明確なローディング状態を表示
- **成功/エラーメッセージ**: 操作結果をモーダルで通知
- **確認ダイアログ**: 削除などの重要な操作には確認を要求
- **レスポンシブデザイン**: モダンで美しいダークテーマUI

## 📋 前提条件

- **Conda**: `conda` コマンドがシステムPATHに通っている必要があります
- **Node.js**: フロントエンドに必要です（v16以上推奨）
- **Python**: バックエンドに必要です（v3.8以上推奨）

## 🚀 セットアップ手順

### 1. リポジトリのクローン

```bash
git clone https://github.com/uehiratakumu/condaManager.git
cd <クローン先のディレクトリ>
```

### 2. バックエンドのセットアップ

バックエンドはFastAPIで動作し、Condaとの対話を処理します。

```bash
cd backend

# 仮想環境の作成（推奨）
python -m venv .venv

# 仮想環境の有効化
# macOS/Linux:
source .venv/bin/activate
# Windows:
# .venv\Scripts\activate

# 依存関係のインストール
pip install -r requirements.txt

# サーバーの起動
uvicorn main:app --reload
```

バックエンドは `http://localhost:8000` で起動します。

**注意:** 仮想環境を使用することで、システムのPython環境を汚染せずに依存関係を管理できます。

### 3. フロントエンドのセットアップ

フロントエンドはViteで構築されたReactアプリケーションです。

新しいターミナルウィンドウを開いて実行してください：

```bash
cd frontend

# 依存関係のインストール
npm install

# 開発サーバーの起動
npm run dev
```

フロントエンドは `http://localhost:5173` で起動します。

## 📖 使い方

### 基本操作

1. ブラウザで `http://localhost:5173` を開きます
2. Conda環境の一覧が表示されます

### 環境の表示切り替え

- **グリッド表示（⊞）**: カード形式で環境を表示
- **テーブル表示（☰）**: 表形式で環境を表示
- ヘッダー右側のボタンで切り替え可能

### ソート機能

- **ヘッダーのドロップダウン**: 全体のソート方法を選択
- **テーブル表示の列ヘッダー**: クリックでその列でソート（再クリックで昇順/降順切り替え）

ソートオプション：
- 名前（A-Z / Z-A）
- Pythonバージョン（低-高 / 高-低）
- サイズ（小-大 / 大-小）
- 更新日時（古-新 / 新-古）

### 環境の作成

1. ヘッダーの「+ Create Environment」をクリック
2. 2つのタブから選択：
   - **Create Manually**: 環境名とPythonバージョンを指定
   - **Import from File**: `environment.yml` または `requirements.txt` をアップロード
3. 「Create」または「Import」をクリック

### パッケージ管理

1. 環境カードまたはテーブル行の「Packages」ボタンをクリック
2. インストール済みパッケージの一覧が表示されます

**個別インストール:**
- パッケージ名を入力して「Install」をクリック

**ファイルからインストール:**
- 「Or install from file:」セクションでファイルを選択
- 「Install from File」ボタンをクリック
- `requirements.txt` または `environment.yml` に対応

**アンインストール:**
- パッケージ行の「Uninstall」ボタンをクリック
- 確認ダイアログで「Uninstall」を選択

### その他の操作

- **複製**: 環境カードの「Clone」をクリックして複製
- **エクスポート**: 「Export」をクリックして `environment.yml` ファイルをダウンロード
- **削除**: 「Delete」をクリック（base環境は削除不可）
- **更新**: ヘッダーの「Refresh」ボタンで環境リストを再読み込み

## 🔧 トラブルシューティング

### バックエンド関連

**接続エラーが表示される**
- バックエンドサーバーがポート8000で実行されているか確認
- `http://localhost:8000/docs` にアクセスしてAPI仕様を確認

**Condaが見つからない**
- `conda` がシステムPATHに含まれているか確認
- シェルの初期化が必要な場合: `conda init <shell_name>`
- ターミナルを再起動して再試行

**パッケージインストールが失敗する**
- パッケージ名が正しいか確認
- Conda/PyPIで利用可能なパッケージか確認
- エラーメッセージを確認して対処

### フロントエンド関連

**画面が表示されない**
- フロントエンドサーバーがポート5173で実行されているか確認
- ブラウザのコンソールでエラーを確認

**操作が反映されない**
- ページをリロード（F5）
- ブラウザのキャッシュをクリア
- 両方のサーバー（バックエンド・フロントエンド）が起動しているか確認

**ファイルアップロードが失敗する**
- ファイル形式が `.yml`, `.yaml`, `.txt` のいずれかか確認
- ファイルの内容が正しい形式か確認
- ファイルサイズが大きすぎないか確認

### パフォーマンス

**環境一覧の読み込みが遅い**
- 環境数が多い場合、Pythonバージョンの取得に時間がかかります
- 初回読み込み後はキャッシュされます

**パッケージリストの表示が遅い**
- パッケージ数が多い環境では読み込みに時間がかかる場合があります
- デフォルトのシステムパッケージは除外されています

## 🛠️ 技術スタック

### バックエンド
- **FastAPI**: 高速なPython Webフレームワーク
- **Uvicorn**: ASGIサーバー
- **Python subprocess**: Condaコマンドの実行

### フロントエンド
- **React**: UIライブラリ
- **Vite**: 高速なビルドツール
- **CSS**: カスタムスタイリング（ダークテーマ、グラスモーフィズム）

## 📝 ライセンス

このプロジェクトはMITライセンスの下で公開されています。
